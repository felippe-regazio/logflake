"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});const os_1=__importDefault(require("os")),fs_1=__importDefault(require("fs")),path_1=__importDefault(require("path")),chalk_1=__importDefault(require("chalk")),tracker_1=__importDefault(require("./tracker")),defaults={prefix:"console",lines:!1,lineChar:"Â·",dateLocale:"en",username:!0,date:!0,platform:!0,mainModule:!0,disabled:!1,seamless:!1,showLogHash:!1,alwaysSave:!1,alwaysQuiet:!1,logDir:"",linebreak:!0};module.exports=(u=defaults)=>{const c={log:"blue",info:"cyan",warn:"yellow",error:"red",trace:"magenta",quiet:"black"};function n(){let a;try{a=process.stdout.columns/2}catch(e){a=50}var e=u.lineChar.repeat(a);return chalk_1.default.gray(e)}function o(e="log",a,t=2){const r=new chalk_1.default.Instance({level:t});var l=c[e]||"cyan",n=`[ ${u.prefix.toUpperCase()} ${e.toUpperCase()} ]`,o=u.platform&&` ${process.platform}${u.username?":":""}`||"",s=u.username&&` ${os_1.default.userInfo().username}`||"",t=u.mainModule?(i=(null===(i=null===require||void 0===require?void 0:require.main)||void 0===i?void 0:i.filename)&&path_1.default.parse(require.main.filename))?` (main: ${i.name}${i.ext})`:"":"",e=u.date?" "+(new Date).toLocaleString(u.dateLocale):"",i=r[l](` x${a.callCount||"unknown"}`),a=u.showLogHash?r.gray(` ${a.hash}`):"";return r[l].bold(n)+`${o}`+`${s}`+`${t}`+`${e}`+`${i}`+`${a}`+"\n"}function s(r,l,n){return{save:()=>{var e,a,t;return u.logDir.trim()?(t=tracker_1.default.read(n),e=path_1.default.resolve(u.logDir),a=`>>>>> ${o(r,t,0)}`,t=u.linebreak?"\n":"",function(e,a,t){"quiet"===a&&(a="log");var r=(new Date).toISOString().replace(/T.*/,"").split("-").reverse().join("-"),r=fs_1.default.createWriteStream(`${e}/${r}.log`,{flags:"a"});const l=new console.Console({stdout:r,stderr:r});setTimeout(()=>{l[a].apply(null,t)},200)}(e,r,[a,...l,t])):console.warn('(!) Could not save the log. The option "logDir" is missing.'),s(r,l,n)},once:()=>(tracker_1.default.mutateFnTrack(n,{fnDisabled:!0}),s(r,l,n)),reset:()=>(tracker_1.default.mutateFnTrack(n,{callCount:0,fnDisabled:!1}),s(r,l,n)),disabled:(e=!0)=>(tracker_1.default.mutateFnTrack(n,{fnDisabled:e}),s(r,l,n)),fire:(e=r)=>f(e,...l)}}function i(){return{save:()=>i(),once:()=>i(),reset:()=>i(),fire:()=>i(),disabled:()=>i()}}function f(e,...a){if("string"!=typeof e||!Object.keys(c).includes(e))return f.apply(null,["log",e,...a]);if(u.disabled)return i();var t=tracker_1.default.fnTrack();const r=s(e,a,t.hash);var l=()=>console[e].apply(null,a);return t.fnDisabled?i():(u.alwaysQuiet||"quiet"===e||(u.seamless?l():(u.lines&&console.log(n()),console.log(`${o(e,t)}`),console.group(),l(),console.groupEnd(),u.lines&&console.log(n()),u.linebreak&&console.log(""))),u.alwaysSave?r.save():r)}return u="string"==typeof u?Object.assign(Object.assign({},defaults),{prefix:u}):Object.assign(Object.assign({},defaults),u),f};
//# sourceMappingURL=index.min.js.map