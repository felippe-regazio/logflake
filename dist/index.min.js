"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});const os_1=__importDefault(require("os")),fs_1=__importDefault(require("fs")),path_1=__importDefault(require("path")),chalk_1=__importDefault(require("chalk")),tracker_1=__importDefault(require("./tracker")),defaults={prefix:"console",lines:!1,lineChar:"Â·",dateLocale:"en",username:!0,date:!0,platform:!0,mainModule:!0,disabled:!1,seamless:!1,showLogHash:!1,alwaysSave:!1,logDir:""};module.exports=(i=defaults)=>{const c={log:"blue",info:"cyan",warn:"yellow",error:"red",trace:"magenta"};function l(){let a;try{a=process.stdout.columns/2}catch(e){a=50}var e=i.lineChar.repeat(a);return chalk_1.default.gray(e)}function o(e="log",a,t=2){const r=new chalk_1.default.Instance({level:t});var l=c[e]||"cyan",n=`[ ${i.prefix.toUpperCase()} ${e.toUpperCase()} ]`,o=i.platform&&` ${process.platform}${i.username?":":""}`||"",s=i.username&&` ${os_1.default.userInfo().username}`||"",t=i.mainModule?(u=(null===(u=null===require||void 0===require?void 0:require.main)||void 0===u?void 0:u.filename)&&path_1.default.parse(require.main.filename))?` (main: ${u.name}${u.ext})`:"":"",e=i.date?" "+(new Date).toLocaleString(i.dateLocale):"",u=r[l](` x${a.callCount||"unknown"}`),a=i.showLogHash?r.gray(` ${a.hash}`):"";return r[l].bold(n)+`${o}`+`${s}`+`${t}`+`${e}`+`${u}`+`${a}`+"\n"}function s(a,l,n){return{save:()=>{var t,r,e=`>>>>> ${o(a,n,0)}`;return t=a,r=[e,...l],setTimeout(()=>{var e=fs_1.default.createWriteStream("./out.log",{flags:"a"});const a=new console.Console({stdout:e,stderr:e});a[t].apply(null,r)},200),s(a,l,n)},once:()=>(n&&tracker_1.default.mutateFnTrack(n.hash,{fnDisabled:!0,once:!0}),s(a,l,n))}}function n(){return{save:()=>n(),once:()=>n()}}function u(e,...a){if("string"!=typeof e||!Object.keys(c).includes(e))return u.apply(null,["log",e,...a]);if(i.disabled)return n();var t=tracker_1.default.fnTrack(),r=()=>console[e].apply(null,a);return t.fnDisabled?n():(i.seamless?r():(i.lines&&console.log(l()),console.log(`${o(e,t)}`),r(),i.lines&&console.log(l())),s(e,a,t))}return i="string"==typeof i?Object.assign(Object.assign({},defaults),{prefix:i}):Object.assign(Object.assign({},defaults),i),u};
//# sourceMappingURL=index.min.js.map